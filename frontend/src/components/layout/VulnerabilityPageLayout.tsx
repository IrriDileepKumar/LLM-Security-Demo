import React from 'react';
import { Link } from 'react-router-dom';
import Card from '../ui/Card';

interface VulnerabilityPageLayoutProps {
  title: string;
  overview: string;
  demoScenario?: string | React.ReactNode;
  mitigations?: string[];
  children: React.ReactNode;
  showEnhancedDemo?: boolean;
  enhancedDemoPath?: string;
  showAutoAttack?: boolean;
  additionalDemos?: Array<{
    path: string;
    label: string;
    icon: string;
  }>;
}

const VulnerabilityPageLayout: React.FC<VulnerabilityPageLayoutProps> = ({
  title,
  overview,
  demoScenario,
  mitigations = [],
  children,
  showEnhancedDemo = false,
  enhancedDemoPath,
  showAutoAttack = false,
  additionalDemos = [],
}) => {
  return (
    <div className="container">
      <h1>{title}</h1>
      
      <Card title="ðŸ“– Overview">
        <p>{overview}</p>
        {(showEnhancedDemo || showAutoAttack || additionalDemos.length > 0) && (
          <div style={{ 
            background: 'linear-gradient(135deg, var(--bg-secondary) 0%, var(--bg-tertiary) 100%)', 
            border: '1px solid var(--border-color)',
            borderRadius: '8px', 
            padding: '16px', 
            marginTop: '16px'
          }}>
            <div style={{ 
              display: 'flex', 
              alignItems: 'center', 
              justifyContent: 'space-between',
              marginBottom: '12px'
            }}>
              <div style={{ 
                fontSize: '14px', 
                fontWeight: '600', 
                color: 'var(--text-primary)',
                display: 'flex',
                alignItems: 'center',
                gap: '6px'
              }}>
                <span style={{ fontSize: '16px' }}>âš¡</span>
                Advanced Testing Tools
              </div>
              <div style={{ 
                fontSize: '12px', 
                color: 'var(--text-muted)',
                fontStyle: 'italic'
              }}>
                Real attack scenarios
              </div>
            </div>
            <div style={{ 
              display: 'flex', 
              flexWrap: 'wrap',
              gap: '8px'
            }}>
              {showEnhancedDemo && enhancedDemoPath && (
                <Link 
                  to={enhancedDemoPath}
                  style={{ 
                    textDecoration: 'none',
                    background: 'var(--accent-color)',
                    color: 'white',
                    padding: '8px 14px',
                    borderRadius: '20px',
                    fontSize: '13px',
                    fontWeight: '500',
                    border: 'none',
                    transition: 'all 0.2s ease',
                    display: 'inline-flex',
                    alignItems: 'center',
                    gap: '4px',
                    boxShadow: '0 2px 4px rgba(0,0,0,0.1)'
                  }}
                  onMouseEnter={(e) => {
                    (e.target as HTMLElement).style.transform = 'translateY(-1px)';
                    (e.target as HTMLElement).style.boxShadow = '0 4px 8px rgba(0,0,0,0.15)';
                  }}
                  onMouseLeave={(e) => {
                    (e.target as HTMLElement).style.transform = 'translateY(0)';
                    (e.target as HTMLElement).style.boxShadow = '0 2px 4px rgba(0,0,0,0.1)';
                  }}
                >
                  ðŸŽ¯ Enhanced Demo
                </Link>
              )}
              {showAutoAttack && (
                <Link 
                  to="/auto-attack"
                  style={{ 
                    textDecoration: 'none',
                    background: 'var(--warning-color)',
                    color: 'white',
                    padding: '8px 14px',
                    borderRadius: '20px',
                    fontSize: '13px',
                    fontWeight: '500',
                    border: 'none',
                    transition: 'all 0.2s ease',
                    display: 'inline-flex',
                    alignItems: 'center',
                    gap: '4px',
                    boxShadow: '0 2px 4px rgba(0,0,0,0.1)'
                  }}
                  onMouseEnter={(e) => {
                    (e.target as HTMLElement).style.transform = 'translateY(-1px)';
                    (e.target as HTMLElement).style.boxShadow = '0 4px 8px rgba(0,0,0,0.15)';
                  }}
                  onMouseLeave={(e) => {
                    (e.target as HTMLElement).style.transform = 'translateY(0)';
                    (e.target as HTMLElement).style.boxShadow = '0 2px 4px rgba(0,0,0,0.1)';
                  }}
                >
                  ðŸ¤– Auto Attack
                </Link>
              )}
              {additionalDemos.map((demo, index) => (
                <Link 
                  key={index}
                  to={demo.path}
                  style={{ 
                    color: 'var(--text-primary)',
                    textDecoration: 'none',
                    background: 'var(--bg-primary)',
                    border: '1px solid var(--border-color)',
                    padding: '8px 14px',
                    borderRadius: '20px',
                    fontSize: '13px',
                    fontWeight: '500',
                    transition: 'all 0.2s ease',
                    display: 'inline-flex',
                    alignItems: 'center',
                    gap: '4px',
                    boxShadow: '0 2px 4px rgba(0,0,0,0.1)'
                  }}
                  onMouseEnter={(e) => {
                    (e.target as HTMLElement).style.transform = 'translateY(-1px)';
                    (e.target as HTMLElement).style.boxShadow = '0 4px 8px rgba(0,0,0,0.15)';
                    (e.target as HTMLElement).style.borderColor = 'var(--accent-color)';
                  }}
                  onMouseLeave={(e) => {
                    (e.target as HTMLElement).style.transform = 'translateY(0)';
                    (e.target as HTMLElement).style.boxShadow = '0 2px 4px rgba(0,0,0,0.1)';
                    (e.target as HTMLElement).style.borderColor = 'var(--border-color)';
                  }}
                >
                  {demo.icon} {demo.label}
                </Link>
              ))}
            </div>
          </div>
        )}
      </Card>

      {demoScenario && (
        <Card title="ðŸŽ­ Demo Scenario">
          <p>{demoScenario}</p>
        </Card>
      )}

      {children}

      {mitigations.length > 0 && (
        <Card title="ðŸ›¡ï¸ Mitigation Strategies">
          <ul>
            {mitigations.map((mitigation, index) => (
              <li key={index} dangerouslySetInnerHTML={{ __html: mitigation }} />
            ))}
          </ul>
        </Card>
      )}
    </div>
  );
};

export default VulnerabilityPageLayout;